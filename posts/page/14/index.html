<!doctype html><html lang=ja dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Posts | tac lifelog</title><meta name=keywords content><meta name=description content="Posts - tac lifelog"><meta name=author content><link rel=canonical href=https://tro3373.github.io/posts/><meta name=google-site-verification content="gFn4gbm1K_1qzq7At2Sr1-7AuHC45a6pCmvAdUNeUGY"><link crossorigin=anonymous href=/assets/css/stylesheet.0c4fd3725171366f335155acde6fb3c7b7042cd2fd075bebf5023d9b28a701b2.css integrity="sha256-DE/TclFxNm8zUVWs3m+zx7cELNL9B1vr9QI9myinAbI=" rel="preload stylesheet" as=style><link rel=stylesheet href=/scss/style.min.7b5d7016468d598a3e753e3d0ecf004679e628a19804af57943ee84be5b7770a.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/base16/apprentice.min.css><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/vim.min.js></script>
<script type=text/javascript src=/js/terraform.js></script>
<script type=text/javascript>hljs.registerLanguage("terraform",window.hljsDefineTerraform),hljs.highlightAll()</script><link rel=icon href=https://tro3373.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://tro3373.github.io/favicon-32x32.png><link rel=icon type=image/png sizes=32x32 href=https://tro3373.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://tro3373.github.io/favicon-32x32.png><link rel=mask-icon href=https://tro3373.github.io/favicon-32x32.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://tro3373.github.io/posts/index.xml><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6962926171897574" crossorigin=anonymous></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-20M4SHCC18"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-20M4SHCC18",{anonymize_ip:!1})}</script><meta property="og:title" content="Posts"><meta property="og:description" content="code,tech,log .. "><meta property="og:type" content="website"><meta property="og:url" content="https://tro3373.github.io/posts/"><meta property="og:image" content="https://tro3373.github.io/favicon.png"><meta property="og:site_name" content="tac lifelog"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://tro3373.github.io/favicon.png"><meta name=twitter:title content="Posts"><meta name=twitter:description content="code,tech,log .. "><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://tro3373.github.io/posts/"}]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://tro3373.github.io/ accesskey=h title="Home (Alt + H)"><img src=https://tro3373.github.io/favicon.png alt aria-label=logo height=35>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://tro3373.github.io/posts/ title=posts><span class=active>posts</span></a></li><li><a href=https://tro3373.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://tro3373.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://tro3373.github.io/archives/ title=archives><span>archives</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://tro3373.github.io/>ホーム</a></div><h1>Posts
<a href=/posts/index.xml title=RSS aria-label=RSS><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" height="23"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></h1></header><article class=post-entry><figure class=entry-cover><img loading=lazy src=https://tro3373.github.io/img.png alt></figure><header class=entry-header><h2>aws vault invalid client token id error</h2></header><div class=entry-content><p>aws-vault で InvalidClientTokenId: The security token included in the request is invalid で怒られる │ Error: error reading IAM Role (rds-enhanced-monitoring-dev-db): InvalidClientTokenId: The security token included in the request is invalid │ status code: 403, request id: d09fe380-0c00-4485-9aeb-1e58740fdcb3 ここに答えがあった
Error: The security token included in the request is invalid · Issue #260 · 99designs/aws-vault · GitHub I’ve encountered the same problem. It’s caused by the AWS API restrictions, that won’t allow you to touch IAM related APIs using the account with MFA enabled, unless you pass the MFA token within the request....</p></div><footer class=entry-footer><span title='2021-12-02 22:33:24 +0900 +0900'><i class='fa-solid fa-pen'></i> 2021-12-02</span>&nbsp;·&nbsp;<span title='2023-09-22 22:52:16 +0900 +0900'><i class='fa-solid fa-rotate-right'></i> 2023-09-22</span>&nbsp;·&nbsp;1 分&nbsp;·&nbsp;125 文字</footer><a class=entry-link aria-label="post link to aws vault invalid client token id error" href=https://tro3373.github.io/posts/2021/2021-12-02-aws-vault-invalid-client-token-id-error/></a></article><article class=post-entry><figure class=entry-cover><img loading=lazy srcset="https://tro3373.github.io/posts/2021/2021-11-26-go_function_in_another_file_undefined_in_go_run_main_go/img_hu1db153a2f682fc4bb533c6eb37ee2c02_25321_360x0_resize_box_3.png 360w ,https://tro3373.github.io/posts/2021/2021-11-26-go_function_in_another_file_undefined_in_go_run_main_go/img_hu1db153a2f682fc4bb533c6eb37ee2c02_25321_480x0_resize_box_3.png 480w ,https://tro3373.github.io/posts/2021/2021-11-26-go_function_in_another_file_undefined_in_go_run_main_go/img.png 556w" sizes="(min-width: 768px) 720px, 100vw" src=https://tro3373.github.io/posts/2021/2021-11-26-go_function_in_another_file_undefined_in_go_run_main_go/img.png alt width=556 height=186></figure><header class=entry-header><h2>別ファイルに書いた main パッケージの Function が undefined 判定される</h2></header><div class=entry-content><p>別ファイルに書いた main パッケージの Function が undefined 判定される ここに答えがあった
go - “undefined” function declared in another file? - Stack Overflow Please read “How to Write Go Code”.
Use go build or go install within the package directory, or supply an import path for the package. Do not use file arguments for build or install.
While you can use file arguments for go run, you should build a package instead, usually with go run ....</p></div><footer class=entry-footer><span title='2021-11-26 17:18:00 +0900 +0900'><i class='fa-solid fa-pen'></i> 2021-11-26</span>&nbsp;·&nbsp;<span title='2023-09-22 22:57:18 +0900 +0900'><i class='fa-solid fa-rotate-right'></i> 2023-09-22</span>&nbsp;·&nbsp;1 分&nbsp;·&nbsp;97 文字</footer><a class=entry-link aria-label="post link to 別ファイルに書いた main パッケージの Function が undefined 判定される" href=https://tro3373.github.io/posts/2021/2021-11-26-go_function_in_another_file_undefined_in_go_run_main_go/></a></article><article class=post-entry><figure class=entry-cover><img loading=lazy srcset="https://tro3373.github.io/posts/2021/2021-06-13-conoha-wing-by-gmo/winglogo_hu6c3d981117370a899926a5a937768d5e_17636_360x0_resize_box_3.png 360w ,https://tro3373.github.io/posts/2021/2021-06-13-conoha-wing-by-gmo/winglogo_hu6c3d981117370a899926a5a937768d5e_17636_480x0_resize_box_3.png 480w ,https://tro3373.github.io/posts/2021/2021-06-13-conoha-wing-by-gmo/winglogo_hu6c3d981117370a899926a5a937768d5e_17636_720x0_resize_box_3.png 720w ,https://tro3373.github.io/posts/2021/2021-06-13-conoha-wing-by-gmo/winglogo.png 720w" sizes="(min-width: 768px) 720px, 100vw" src=https://tro3373.github.io/posts/2021/2021-06-13-conoha-wing-by-gmo/winglogo.png alt width=720 height=400></figure><header class=entry-header><h2>ConoHa WING by GMO</h2></header><div class=entry-content><p>国内最速 レンタルサーバ 楽天ひかり</p></div><footer class=entry-footer><span title='2021-06-13 09:02:42 +0900 JST'><i class='fa-solid fa-pen'></i> 2021-06-13</span>&nbsp;·&nbsp;<span title='2021-06-13 09:02:42 +0900 JST'><i class='fa-solid fa-rotate-right'></i> 2021-06-13</span>&nbsp;·&nbsp;1 分&nbsp;·&nbsp;3 文字</footer><a class=entry-link aria-label="post link to ConoHa WING by GMO" href=https://tro3373.github.io/posts/2021/2021-06-13-conoha-wing-by-gmo/></a></article><article class=post-entry><figure class=entry-cover><img loading=lazy srcset="https://tro3373.github.io/posts/2021/2021-04-09-trap-not-work-with-pipe/img_hu19c963b7e733f6fff4a6db22d8861916_29775_360x0_resize_box_3.png 360w ,https://tro3373.github.io/posts/2021/2021-04-09-trap-not-work-with-pipe/img_hu19c963b7e733f6fff4a6db22d8861916_29775_480x0_resize_box_3.png 480w ,https://tro3373.github.io/posts/2021/2021-04-09-trap-not-work-with-pipe/img.png 601w" sizes="(min-width: 768px) 720px, 100vw" src=https://tro3373.github.io/posts/2021/2021-04-09-trap-not-work-with-pipe/img.png alt width=601 height=221></figure><header class=entry-header><h2>trap コマンドは pipe と併用すると動作しない</h2></header><div class=entry-content><p>trap コマンドは pipe と併用すると動作しない 以下のBashスクリプトがあった場合に、パイプで出力全部ログ吐いちゃおう、 っておもったらうまくERRトラップが動かなくなったので、メモ
動くコード #!/bin/bash trap "echo Non-zero exit code detected!" ERR function fail_please() { echo "Returning non-zero exit code!" return 1 } fail_please # 出力結果 Returning non-zero exit code! Non-zero exit code detected! 動かないコード #!/bin/bash trap "echo Non-zero exit code detected!" ERR function fail_please() { echo "Returning non-zero exit code!" return 1 } fail_please |& tee log_file.log # 出力結果 Returning non-zero exit code! Bash: Trap ERR does not work when pipe operator is used The ERR trap fires for “simple commands” a pipeline is not a simple command....</p></div><footer class=entry-footer><span title='2021-04-09 09:24:08 +0900 JST'><i class='fa-solid fa-pen'></i> 2021-04-09</span>&nbsp;·&nbsp;<span title='2021-04-19 20:59:58 +0900 JST'><i class='fa-solid fa-rotate-right'></i> 2021-04-19</span>&nbsp;·&nbsp;1 分&nbsp;·&nbsp;142 文字</footer><a class=entry-link aria-label="post link to trap コマンドは pipe と併用すると動作しない" href=https://tro3373.github.io/posts/2021/2021-04-09-trap-not-work-with-pipe/></a></article><article class=post-entry><figure class=entry-cover><img loading=lazy srcset="https://tro3373.github.io/posts/2019/2019-11-11-enable-apigw-log-via-serverless-framework/img_hueea584cd54d4beb4e6e6e2f837289616_36629_360x0_resize_q75_box.jpg 360w ,https://tro3373.github.io/posts/2019/2019-11-11-enable-apigw-log-via-serverless-framework/img_hueea584cd54d4beb4e6e6e2f837289616_36629_480x0_resize_q75_box.jpg 480w ,https://tro3373.github.io/posts/2019/2019-11-11-enable-apigw-log-via-serverless-framework/img_hueea584cd54d4beb4e6e6e2f837289616_36629_720x0_resize_q75_box.jpg 720w ,https://tro3373.github.io/posts/2019/2019-11-11-enable-apigw-log-via-serverless-framework/img_hueea584cd54d4beb4e6e6e2f837289616_36629_1080x0_resize_q75_box.jpg 1080w ,https://tro3373.github.io/posts/2019/2019-11-11-enable-apigw-log-via-serverless-framework/img_hueea584cd54d4beb4e6e6e2f837289616_36629_1500x0_resize_q75_box.jpg 1500w ,https://tro3373.github.io/posts/2019/2019-11-11-enable-apigw-log-via-serverless-framework/img.jpg 2065w" sizes="(min-width: 768px) 720px, 100vw" src=https://tro3373.github.io/posts/2019/2019-11-11-enable-apigw-log-via-serverless-framework/img.jpg alt width=2065 height=721></figure><header class=entry-header><h2>ApiGatewayのログを ServerlessFramework で設定したい</h2></header><div class=entry-content><p>要件としては、ApiGateway &lt;=> Lambda の統合設定条件配下にて、 Lambdaからの応答結果が6MBを超えた場合に以下のようなログが出力される
Lambda execution failed with status 200 due to customer function error: body size is too long. Lambda request id: XXXX-XXXX... これに対して、ServerlessFramework でログ設定を行いたい
参考 Serverless.yml Reference Enhancements for API Gateway REST API log setup Serverless complains about “Rest API id could not be resolved.” ApiGateway ステージ ログ／トレース の設定と動作 IAM Policy作成含め以下の設定だけで作成される
provider: logs: restApi: accessLogging: false # Optional configuration which enables or disables access logging. Defaults to true....</p></div><footer class=entry-footer><span title='2019-11-11 05:45:40 +0900 JST'><i class='fa-solid fa-pen'></i> 2019-11-11</span>&nbsp;·&nbsp;<span title='2019-11-11 05:45:40 +0900 JST'><i class='fa-solid fa-rotate-right'></i> 2019-11-11</span>&nbsp;·&nbsp;1 分&nbsp;·&nbsp;148 文字</footer><a class=entry-link aria-label="post link to ApiGatewayのログを ServerlessFramework で設定したい" href=https://tro3373.github.io/posts/2019/2019-11-11-enable-apigw-log-via-serverless-framework/></a></article><footer class=page-footer><nav class=pagination><a class=prev href=https://tro3373.github.io/posts/page/13/>«&nbsp;前へ&nbsp;</a>
<a class=next href=https://tro3373.github.io/posts/page/15/>次へ&nbsp;&nbsp;»</a></nav></footer></main><footer class=footer><span>&copy; 2025 <a href=https://tro3373.github.io/>tac lifelog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>