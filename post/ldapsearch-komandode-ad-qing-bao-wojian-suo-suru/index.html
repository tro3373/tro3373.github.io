<!DOCTYPE html>
<html lang="ja">
  <head>
    
      <title>ldapsearch コマンドで AD 情報を検索する :: tac lifelog — code,tech,log .. </title>
    
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="description" content="もう何がなんだかわからないので、とりあえずメモ。。
LDAP ワード集  DIT = Directory Information Tree DN = 識別名（Distinguished Name） DC = ドメイン構成要素(domain component) O = 組織名(organization) OU = 組織単位(organizational unit) CN = 一般名称(common name)  sample.local ドメインの場合の検索方法 # ユーザ Administrator を検索 ldapsearch -x -LLL -D &amp;quot;cn=Administrator,cn=Users,dc=sample,dc=local&amp;quot; -W -b &amp;quot;cn=Administrator,cn=Users,dc=sample,dc=local&amp;quot; # CN Users に属するユーザを検索 ldapsearch -x -LLL -D &amp;quot;cn=Administrator,cn=Users,dc=sample,dc=local&amp;quot; -W -b &amp;quot;cn=Users,dc=sample,dc=local&amp;quot;  以下、 ldapsearch コマンドの OPTION 抜粋
 ldapsearch opens a connection to an LDAP server, binds, and performs a search using specified parameters."/>
<meta name="keywords" content=""/>
<meta name="robots" content="noodp"/>
<link rel="canonical" href="https://tro3373.github.io/post/ldapsearch-komandode-ad-qing-bao-wojian-suo-suru/" />





<link rel="stylesheet" href="https://tro3373.github.io/assets/style.css">


<link rel="stylesheet" href="https://tro3373.github.io/style.css">


<link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://tro3373.github.io/img/apple-touch-icon-144-precomposed.png">
<link rel="shortcut icon" href="https://tro3373.github.io/img/favicon.png">


<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="ldapsearch コマンドで AD 情報を検索する"/>
<meta name="twitter:description" content="もう何がなんだかわからないので、とりあえずメモ。。
LDAP ワード集  DIT = Directory Information Tree DN = 識別名（Distinguished Name） DC = ドメイン構成要素(domain component) O = 組織名(organization) OU = 組織単位(organizational unit) CN = 一般名称(common name)  sample.local ドメインの場合の検索方法 # ユーザ Administrator を検索 ldapsearch -x -LLL -D &quot;cn=Administrator,cn=Users,dc=sample,dc=local&quot; -W -b &quot;cn=Administrator,cn=Users,dc=sample,dc=local&quot; # CN Users に属するユーザを検索 ldapsearch -x -LLL -D &quot;cn=Administrator,cn=Users,dc=sample,dc=local&quot; -W -b &quot;cn=Users,dc=sample,dc=local&quot;  以下、 ldapsearch コマンドの OPTION 抜粋
 ldapsearch opens a connection to an LDAP server, binds, and performs a search using specified parameters."/>



<meta property="og:title" content="ldapsearch コマンドで AD 情報を検索する" />
<meta property="og:description" content="もう何がなんだかわからないので、とりあえずメモ。。
LDAP ワード集  DIT = Directory Information Tree DN = 識別名（Distinguished Name） DC = ドメイン構成要素(domain component) O = 組織名(organization) OU = 組織単位(organizational unit) CN = 一般名称(common name)  sample.local ドメインの場合の検索方法 # ユーザ Administrator を検索 ldapsearch -x -LLL -D &quot;cn=Administrator,cn=Users,dc=sample,dc=local&quot; -W -b &quot;cn=Administrator,cn=Users,dc=sample,dc=local&quot; # CN Users に属するユーザを検索 ldapsearch -x -LLL -D &quot;cn=Administrator,cn=Users,dc=sample,dc=local&quot; -W -b &quot;cn=Users,dc=sample,dc=local&quot;  以下、 ldapsearch コマンドの OPTION 抜粋
 ldapsearch opens a connection to an LDAP server, binds, and performs a search using specified parameters." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://tro3373.github.io/post/ldapsearch-komandode-ad-qing-bao-wojian-suo-suru/" />
<meta property="article:published_time" content="2015-10-18T00:00:00+00:00" />
<meta property="article:modified_time" content="2015-10-18T00:00:00+00:00" /><meta property="og:site_name" content="tac lifelog" />






  </head>
  <body class="">
    <div class="container">
      <header class="header">
  <span class="header__inner">
    <a href="/" class="logo" style="text-decoration: none;">
  
    <span class="logo__mark"><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44">
  <path fill="none" d="M15 8l14.729 14.382L15 35.367"/>
</svg>
</span>
    <span class="logo__text">ag -l |sort -r</span>
    <span class="logo__cursor"></span>
  
</a>

    <span class="header__right">
      
        <nav class="menu">
  <ul class="menu__inner menu__inner--desktop">
    
      
      
        <ul class="menu__sub-inner">
          <li class="menu__sub-inner-more-trigger">
            Show more
            <span class="menu__sub-inner-more-trigger-icon"><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44">
  <path fill="none" d="M15 8l14.729 14.382L15 35.367"/>
</svg>
</span>
          </li>

          <ul class="menu__sub-inner-more hidden">
            
              
                <li><a href="/about">About</a></li>
              
            
              
                <li><a href="/archive">Archives</a></li>
              
            
              
                <li><a href="/categories">Categories</a></li>
              
            
              
                <li><a href="/tags">Tags</a></li>
              
            
          </ul>
        </ul>
      
    
  </ul>

  <ul class="menu__inner menu__inner--mobile">
    
      
        <li><a href="/about">About</a></li>
      
    
      
        <li><a href="/archive">Archives</a></li>
      
    
      
        <li><a href="/categories">Categories</a></li>
      
    
      
        <li><a href="/tags">Tags</a></li>
      
    
  </ul>
</nav>

        <span class="menu-trigger">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M0 0h24v24H0z" fill="none"/>
            <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
          </svg>
        </span>
      
      <span class="theme-toggle">
        <svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
  3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
  13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"/>
</svg>

      </span>
    </span>
  </span>
</header>


      <div class="content">
        
  <div class="post">
    <h2 class="post-title"><a href="https://tro3373.github.io/post/ldapsearch-komandode-ad-qing-bao-wojian-suo-suru/">ldapsearch コマンドで AD 情報を検索する</a></h2>
    <div class="post-meta">
      
        <span class="post-date">
            2015-10-18
        </span>
      
      
      
    </div>

    
      <span class="post-tags">
        
          #<a href="https://tro3373.github.io/tags/centos7/">centos7</a>&nbsp;
        
          #<a href="https://tro3373.github.io/tags/samba4/">samba4</a>&nbsp;
        
          #<a href="https://tro3373.github.io/tags/ldap/">ldap</a>&nbsp;
        
          #<a href="https://tro3373.github.io/tags/ldapsearch/">ldapsearch</a>&nbsp;
        
      </span>
    

    

    
    <script data-ad-client="ca-pub-6962926171897574" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    

    <div class="post-content">
      

<p><img src="/images/2015/10/20110425081720.png" alt="" />
<img src="/images/2015/10/samba-4.jpg" alt="" /></p>

<p>もう何がなんだかわからないので、とりあえずメモ。。</p>

<h1 id="ldap-ワード集">LDAP ワード集</h1>

<ul>
<li>DIT = Directory Information Tree</li>
<li>DN = 識別名（Distinguished Name）</li>
<li>DC = ドメイン構成要素(domain component)</li>
<li>O = 組織名(organization)</li>
<li>OU = 組織単位(organizational unit)</li>
<li>CN = 一般名称(common name)</li>
</ul>

<h3 id="sample-local-ドメインの場合の検索方法"><code>sample.local</code> ドメインの場合の検索方法</h3>

<pre><code class="language-sh"># ユーザ Administrator を検索
ldapsearch -x -LLL -D &quot;cn=Administrator,cn=Users,dc=sample,dc=local&quot; -W -b &quot;cn=Administrator,cn=Users,dc=sample,dc=local&quot;
# CN Users に属するユーザを検索
ldapsearch -x -LLL -D &quot;cn=Administrator,cn=Users,dc=sample,dc=local&quot; -W -b &quot;cn=Users,dc=sample,dc=local&quot;
</code></pre>

<p>以下、 <code>ldapsearch</code> コマンドの OPTION 抜粋</p>

<pre><code> ldapsearch opens a connection to an LDAP server, binds,
 and performs a search using specified parameters.
 The filter should conform to the string representation
 for search filters as defined in RFC 4515.
 If not provided, the default filter, (objectClass=*), is used.

 If ldapsearch finds one or more entries,
 the attributes specified by attrs are returned.
 If * is listed, all user attributes are returned.
 If + is listed, all operational attributes are returned.
 If no attrs are listed, all user attributes are returned.
 If only 1.1 is listed, no attributes will be returned.

 The search results are displayed using an extended version of LDIF.
 Option -L controls the format of the output.

 -L                Search results are display in LDAP Data Interchange Format detailed in ldif(5).
                   A single -L restricts the output to LDIFv1.
                   A second -L disables comments.
                   A third -L disables printing of the LDIF version.
                   The default is to use an extended version of LDIF.
 -x                use simple authentication (as opposed to SASL)
 -H &lt;ldapuri&gt;      Used to specify a URI or list of URI’s to of ldap servers.
                   This can also be used to specify the protocol, server,
                   and port for queries using SSL/TLS,
                   ie: -H &quot;ldaps://myserver.mydomain.com:636&quot;.
 -h &lt;ldaphost&gt;     specify host to query
 -p &lt;port&gt;         specify port to connect to; 389 is the default (optional)
 -b &lt;search base&gt;  The starting point for the search.
                   It often looks like &quot;dc=mydomain,dc=com&quot;
                   「ベースDN」はLDAP検索のベース（基本）となるエントリを指定
 -D &lt;binddn&gt;       The DN to bind to the directory.
                   In other words, the user you are authenticating with.
                   The bind DN may look like “uid=myuser,dc=mydomain,dc=com” or
                   “cn=Directory Manager”.
                   The Directory Manager is the directory’s superuser account.
 -W                Prompt for the password.
                   The password should match what is in your directory
                   for the the binddn (-D).  Mutually exclusive from -w.
 -w &lt;password&gt;     Specify your password on the command line.
 -s &lt;scope&gt;        speicfy the scope as &lt;base|one|sub|children&gt;.
                   Base searches just the base object, sub searches all subtrees,
                   one searches one level, and children searches just child nodes.
                   The default is sub.
 -z 0              Set the sizelimit for a search in the event the server enforces
                   a limit that’s cutting off your results.
                   Only the super user account (Directory Manager) can do this.
 -ZZ               Force use of StartTLS.
</code></pre>

<p>難しい。。。</p>

<h2 id="参考">参考</h2>

<ul>
<li><a href="http://linux.die.net/man/1/ldapsearch">ldapsearch(1) - Linux man page</a></li>
<li><a href="http://www.vinidox.com/ldap/querying-an-ldap-server-from-the-command-line-with-ldap-utils-ldapsearch-ldapadd-ldapmodify/">Querying an LDAP server from the command line with ldap-utils: ldapsearch, ldapadd, ldapmodify</a></li>
<li><a href="http://gihyo.jp/admin/serial/01/ad2010/0002">第2回　誰も教えてくれないActive DirectoryとLDAPの「本当の関係」［後編］</a></li>
<li><a href="http://gihyo.jp/admin/serial/01/ad2010/0003">第3回　LDAPを使ってActive Directoryを制御しよう［その1：ldpとcsvde］</a></li>
<li><a href="http://l-w-i.net/t/openldap/ldapsearch_001.txt">登録されているエントリを表示する(ldapsearch)</a></li>
<li><a href="http://tech.n-linux.com/index.php?%A5%C6%A5%AF%A5%CB%A5%AB%A5%EB%A5%CE%A1%BC%A5%C8%2F%C7%A7%BE%DA%A5%B5%A1%BC%A5%D0%B9%BD%C3%DB%2FOpenLDAP%2FOpenLDAP%A4%F2%CD%F8%CD%D1%A4%B7%A4%BF%A5%E6%A1%BC%A5%B6%A1%BC%C7%A7%BE%DA">OpenLDAPを利用したユーザー認証</a></li>
<li><a href="http://www015.upp.so-net.ne.jp/unixlife/practical/openldap-1.html">OpenLDAPの使用方法とスキーマ</a></li>
</ul>

    </div>
    
      <div class="pagination">
        <div class="pagination__title">
          <span class="pagination__title-h">Read other posts</span>
          <hr />
        </div>
        <div class="pagination__buttons">
          
            <span class="button previous">
              <a href="https://tro3373.github.io/post/bookmarklet-defan-wasiitesutonoshou-zhu-kewosuru/">
                <span class="button__icon">←</span>
                <span class="button__text">Bookmarklet で煩わしいテストの手助けをする</span>
              </a>
            </span>
          
          
            <span class="button next">
              <a href="https://tro3373.github.io/post/docker/docker-machine-docker-gitlab/">
                <span class="button__text">Docker Machine(Boot2Docker(Tiny Linux)) 上で docker/gitlab を動かしてみる</span>
                <span class="button__icon">→</span>
              </a>
            </span>
          
        </div>
      </div>
    

    
    <br />
    <br />
    <br />
    <br />
    <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "jokrlzy" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


    </div>

      </div>

      
        <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright copyright--user">All rights reserved - 2016</div>
    
  </div>
</footer>

<script src="https://tro3373.github.io/assets/main.js"></script>
<script src="https://tro3373.github.io/assets/prism.js"></script>


      
    </div>

    
      
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-27125974-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

    
  </body>
</html>
