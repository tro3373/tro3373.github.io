<!doctype html><html lang=ja dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>tech | tac lifelog</title><meta name=keywords content><meta name=description content="code,tech,log .. "><meta name=author content><link rel=canonical href=https://tro3373.github.io/categories/tech/><meta name=google-site-verification content="gFn4gbm1K_1qzq7At2Sr1-7AuHC45a6pCmvAdUNeUGY"><link crossorigin=anonymous href=/assets/css/stylesheet.0c4fd3725171366f335155acde6fb3c7b7042cd2fd075bebf5023d9b28a701b2.css integrity="sha256-DE/TclFxNm8zUVWs3m+zx7cELNL9B1vr9QI9myinAbI=" rel="preload stylesheet" as=style><link rel=stylesheet href=/scss/style.min.7b5d7016468d598a3e753e3d0ecf004679e628a19804af57943ee84be5b7770a.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/base16/apprentice.min.css><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/vim.min.js></script>
<script type=text/javascript src=/js/terraform.js></script>
<script type=text/javascript>hljs.registerLanguage("terraform",window.hljsDefineTerraform),hljs.highlightAll()</script><link rel=icon href=https://tro3373.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://tro3373.github.io/favicon-32x32.png><link rel=icon type=image/png sizes=32x32 href=https://tro3373.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://tro3373.github.io/favicon-32x32.png><link rel=mask-icon href=https://tro3373.github.io/favicon-32x32.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://tro3373.github.io/categories/tech/index.xml><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6962926171897574" crossorigin=anonymous></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-20M4SHCC18"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-20M4SHCC18",{anonymize_ip:!1})}</script><meta property="og:title" content="tech"><meta property="og:description" content="code,tech,log .. "><meta property="og:type" content="website"><meta property="og:url" content="https://tro3373.github.io/categories/tech/"><meta property="og:image" content="https://tro3373.github.io/favicon.png"><meta property="og:site_name" content="tac lifelog"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://tro3373.github.io/favicon.png"><meta name=twitter:title content="tech"><meta name=twitter:description content="code,tech,log .. "></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://tro3373.github.io/ accesskey=h title="Home (Alt + H)"><img src=https://tro3373.github.io/favicon.png alt aria-label=logo height=35>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://tro3373.github.io/posts/ title=posts><span>posts</span></a></li><li><a href=https://tro3373.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://tro3373.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://tro3373.github.io/archives/ title=archives><span>archives</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://tro3373.github.io/>ホーム</a>&nbsp;»&nbsp;<a href=https://tro3373.github.io/categories/>Categories</a></div><h1>tech
<a href=/categories/tech/index.xml title=RSS aria-label=RSS><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" height="23"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></h1></header><article class="post-entry tag-entry"><figure class=entry-cover><img loading=lazy srcset="https://tro3373.github.io/posts/2022/2022-06-22-go-generate-assests-box/img_hu34ca9979c11b71032cda72c194bb9ac8_39959_360x0_resize_box_3.png 360w ,https://tro3373.github.io/posts/2022/2022-06-22-go-generate-assests-box/img_hu34ca9979c11b71032cda72c194bb9ac8_39959_480x0_resize_box_3.png 480w ,https://tro3373.github.io/posts/2022/2022-06-22-go-generate-assests-box/img.png 669w" sizes="(min-width: 768px) 720px, 100vw" src=https://tro3373.github.io/posts/2022/2022-06-22-go-generate-assests-box/img.png alt width=669 height=276></figure><header class=entry-header><h2>go generate assests box</h2></header><div class=entry-content><p>go generate を使った assets ディレクトリの静的組み込みバイナリ処理 モノリポで管理しているSPAなクライアント側の成果物 (dist) を gin で静的配布 できないかと思った際に調べた内容。 結局使用していないが、バイナリ化する手順としては使えそうなのでメモしておく。
ディレクトリは以下の様な形
├── Makefile ├── assets -> ../../client/back/dist ├── box │ ├── blob.go │ └── box.go └─generator.go Makefile まずは関係ないけど、Makefileって@書けば && バックスラッシュ連結とかいらんのかという発見 ./... 指定で全てを対象に指定 generate: @go generate ./... @echo "[OK] Files added to embed box!" generator.go 1行目はfmtをかけると自動付与された // +build ignore コメントにより通常ビルド対象から外れる設定 生成される go ファイルは blob.go で box 配下に出力される f, err := os.Create(blobFileName) や、 embedFolder string = "../assets/" から current directory は box 配下の模様 //go:build ignore // +build ignore package main import ( "bytes" "fmt" "go/format" "io/ioutil" "log" "os" "path/filepath" "strings" "text/template" ) const ( blobFileName string = "blob....</p></div><footer class=entry-footer><span title='2022-06-22 04:53:06 +0900 JST'><i class='fa-solid fa-pen'></i> 2022-06-22</span>&nbsp;·&nbsp;<span title='2023-04-26 19:42:46 +0900 JST'><i class='fa-solid fa-rotate-right'></i> 2023-04-26</span>&nbsp;·&nbsp;3 分&nbsp;·&nbsp;559 文字</footer><a class=entry-link aria-label="post link to go generate assests box" href=https://tro3373.github.io/posts/2022/2022-06-22-go-generate-assests-box/></a></article><article class="post-entry tag-entry"><figure class=entry-cover><img loading=lazy srcset="https://tro3373.github.io/posts/2022/2022-05-19-read-context-of-docker-compose-evolution/img_huab1732e0f8111f71f8f50905e833d9a6_49615_360x0_resize_box_3.png 360w ,https://tro3373.github.io/posts/2022/2022-05-19-read-context-of-docker-compose-evolution/img.png 453w" sizes="(min-width: 768px) 720px, 100vw" src=https://tro3373.github.io/posts/2022/2022-05-19-read-context-of-docker-compose-evolution/img.png alt width=453 height=261></figure><header class=entry-header><h2>docker compose の仕様変更による進化</h2></header><div class=entry-content><p>docker compose の仕様変更による進化 docker-compose から docker compose へ移行しようかと思い調べ始めたので記録
Context of Docker Compose evolution Composeの仕様変更により compose yaml ファイルと docker-compose の実装が明確に切り離された この変更により多くの機能追加ができるようになった composeコマンドのdocker cliへの追加 Docker コンテキストの切り替えにより、クラウドプラットフォームへ アプリケーションを up する Amazon ECS Microsoft ACI Compose v2 は仕様の一部としてメンテナンスされる compose-go バインディングに直接依存 これにより、コミュニティによる提案や、Docker cli/Engine による実験的な実装や機能のユーザへの提供を早めます Compose v2 は Go で書かれている為、docker コマンドライン機能の統合を改善し、Python依存なしに各種デバイス上でネイティブに走ることが可能となります。 詳細は以下から
Overview of Docker Compose | Docker Documentation Context of Docker Compose evolution Introduction of the Compose specification makes a clean distinction between the Compose YAML file model and the docker-compose implementation....</p></div><footer class=entry-footer><span title='2022-05-19 05:28:44 +0900 JST'><i class='fa-solid fa-pen'></i> 2022-05-19</span>&nbsp;·&nbsp;<span title='2022-05-19 05:28:44 +0900 JST'><i class='fa-solid fa-rotate-right'></i> 2022-05-19</span>&nbsp;·&nbsp;2 分&nbsp;·&nbsp;254 文字</footer><a class=entry-link aria-label="post link to docker compose の仕様変更による進化" href=https://tro3373.github.io/posts/2022/2022-05-19-read-context-of-docker-compose-evolution/></a></article><article class="post-entry tag-entry"><figure class=entry-cover><img loading=lazy src=https://tro3373.github.io/img.jpg alt></figure><header class=entry-header><h2>ipv6</h2></header><div class=entry-content><p>楽天ひかり環境のネットワーク設定 最終的な構成は以下
ONU - SwitchHub -- Router(PPPoE) | | |- 公開用サーバ | | | |(&lt;= ルータ同士をローカルエリア接続) | | |- Router(IPoE) |- スマホ |- テレビ.. IPv6 で通常は高速通信 IPv4 PPPoE でポート公開やVPNなどの DS-Lite で利用できないものを使用する想定 以下各項目と溜まった知見 IPoE PPPoE ルーターの設定 設定といってもIPv4 ルーターのDHCPを無効にして、IPアドレスをIPv6ルーターに合わせるだけです。IPv6ルーター（AX1167GR2）はいじる必要はありません。
IPv4 PPPoEとIPv6（v6プラス）を併用する | 小山電子 ONU SwitchingHub構成の方がシンプル PPPoEパススルー設定で数珠繋ぎとする方法も接続確認できたが、 ONU - ルータ間にSwitchingHubを挟むほうがシンプル PPPoEパススルー(ブリッジ) ネットワーク内部から外部へのPPPoE接続を中継(パススルー(ブリッジ))する機能。 家庭などでインターネット接続に用いられるブロードバンドルータなどが持つ機能の一つ 古いネットワーク(IPv4/PPPoE)接続方式に戻してからネットワークに接続する IPv4アドレスがない(IPv6で接続している)状態でも、IPv6非対応サービスなどに接続することが可能 IPv6パススルー(ブリッジ) IPv6ブリッジ機能が有効である状態のこと 配下に設置したPCやルータがIPv6ネットワークへ接続できる状態になっている事を言います。 PPTPパススルー(ブリッジ)(VPNパススルー) IPsec(IP Security)または、PPTP(Point to Point Tunneling Protocol)による VPN(Virtual Private Network)通信を通過させることができる機能 IPv4 over IPv6 サービス名として、 v6 プラス と表記する場合あり 通信のカプセル化 IPv6パケットの中にIPv4パケットを包含して通信 必要に応じてIPv6接続で通信でき、必要に応じてIPv4アドレスでの通信も可能 インターネット回線に接続するまでに中継ポイントを介さない為、高速 光回線(ipv4(PPPoE))では網終端装置を介する方式が主流 アクセス集中すると通信速度が遅くなる事が課題 接続方式は複数ある DS-Lite MAP-E IPv4 over IPv6技術としてMAP-EとDS-Liteを比較したとき、両者にほぼ違いはない IPv4 over IPv6では、IPアドレスのほか、ポートも複数のユーザーと共有 ポート開放は制限され、割り当てられたポートのみを開放可能 固定IPが使用できない 利用できる接続サービスが少ない VPS(仮想専用ネットワーク)などのPPTP SCTPを利用するサービスなど SCTP ストリーム コントロール トランスミッション プロトコル TCPやUDPと同様に、OSI参照モデルの中では第4層となるトランスポートレイヤに位置付けられるプロトコル 元々はIPネットワーク上で電話網のシグナリングプロトコルを実現するために設計されたが、 最終的には汎用性の高いトランスポートプロトコルとして、2000年に定義される インターネット接続の仕組み IPv4(PPPoE) 遅い IPv4方式のWEBサイトにのみアクセス可能 IPv6(PPPoE) 遅い IPv6方式のWEBサイトにのみアクセス可能 IPv6(IPoE) 速い IPv6方式のWEBサイトにのみアクセス可能 IPv6(IPoE)を利用するためには、インターネットを接続する企業側だけでなく、 プロバイダーなどの接続サービス側もIPv6に対応する必要あり 網終端装置はなぜアクセス集中で通信速度が遅くなるのか NGN網 Next Generation Network NTT東西の網 構造 PC - NGN - ISP - WWW...</p></div><footer class=entry-footer><span title='2022-01-04 09:13:45 +0900 +0900'><i class='fa-solid fa-pen'></i> 2022-01-04</span>&nbsp;·&nbsp;<span title='2023-09-22 22:55:47 +0900 +0900'><i class='fa-solid fa-rotate-right'></i> 2023-09-22</span>&nbsp;·&nbsp;2 分&nbsp;·&nbsp;217 文字</footer><a class=entry-link aria-label="post link to ipv6" href=https://tro3373.github.io/posts/2022/2022-01-04-ipv6/></a></article><article class="post-entry tag-entry"><figure class=entry-cover><img loading=lazy src=https://tro3373.github.io/img.png alt></figure><header class=entry-header><h2>aws vault invalid client token id error</h2></header><div class=entry-content><p>aws-vault で InvalidClientTokenId: The security token included in the request is invalid で怒られる │ Error: error reading IAM Role (rds-enhanced-monitoring-dev-db): InvalidClientTokenId: The security token included in the request is invalid │ status code: 403, request id: d09fe380-0c00-4485-9aeb-1e58740fdcb3 ここに答えがあった
Error: The security token included in the request is invalid · Issue #260 · 99designs/aws-vault · GitHub I’ve encountered the same problem. It’s caused by the AWS API restrictions, that won’t allow you to touch IAM related APIs using the account with MFA enabled, unless you pass the MFA token within the request....</p></div><footer class=entry-footer><span title='2021-12-02 22:33:24 +0900 +0900'><i class='fa-solid fa-pen'></i> 2021-12-02</span>&nbsp;·&nbsp;<span title='2023-09-22 22:52:16 +0900 +0900'><i class='fa-solid fa-rotate-right'></i> 2023-09-22</span>&nbsp;·&nbsp;1 分&nbsp;·&nbsp;125 文字</footer><a class=entry-link aria-label="post link to aws vault invalid client token id error" href=https://tro3373.github.io/posts/2021/2021-12-02-aws-vault-invalid-client-token-id-error/></a></article><article class="post-entry tag-entry"><figure class=entry-cover><img loading=lazy srcset="https://tro3373.github.io/posts/2021/2021-11-26-go_function_in_another_file_undefined_in_go_run_main_go/img_hu1db153a2f682fc4bb533c6eb37ee2c02_25321_360x0_resize_box_3.png 360w ,https://tro3373.github.io/posts/2021/2021-11-26-go_function_in_another_file_undefined_in_go_run_main_go/img_hu1db153a2f682fc4bb533c6eb37ee2c02_25321_480x0_resize_box_3.png 480w ,https://tro3373.github.io/posts/2021/2021-11-26-go_function_in_another_file_undefined_in_go_run_main_go/img.png 556w" sizes="(min-width: 768px) 720px, 100vw" src=https://tro3373.github.io/posts/2021/2021-11-26-go_function_in_another_file_undefined_in_go_run_main_go/img.png alt width=556 height=186></figure><header class=entry-header><h2>別ファイルに書いた main パッケージの Function が undefined 判定される</h2></header><div class=entry-content><p>別ファイルに書いた main パッケージの Function が undefined 判定される ここに答えがあった
go - “undefined” function declared in another file? - Stack Overflow Please read “How to Write Go Code”.
Use go build or go install within the package directory, or supply an import path for the package. Do not use file arguments for build or install.
While you can use file arguments for go run, you should build a package instead, usually with go run ....</p></div><footer class=entry-footer><span title='2021-11-26 17:18:00 +0900 +0900'><i class='fa-solid fa-pen'></i> 2021-11-26</span>&nbsp;·&nbsp;<span title='2023-09-22 22:57:18 +0900 +0900'><i class='fa-solid fa-rotate-right'></i> 2023-09-22</span>&nbsp;·&nbsp;1 分&nbsp;·&nbsp;97 文字</footer><a class=entry-link aria-label="post link to 別ファイルに書いた main パッケージの Function が undefined 判定される" href=https://tro3373.github.io/posts/2021/2021-11-26-go_function_in_another_file_undefined_in_go_run_main_go/></a></article><footer class=page-footer><nav class=pagination><a class=prev href=https://tro3373.github.io/categories/tech/page/13/>«&nbsp;前へ&nbsp;</a>
<a class=next href=https://tro3373.github.io/categories/tech/page/15/>次へ&nbsp;&nbsp;»</a></nav></footer></main><footer class=footer><span>&copy; 2026 <a href=https://tro3373.github.io/>tac lifelog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>